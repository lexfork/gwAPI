version: '2'

services:
    tyk_redis:
        image: redis:latest
        hostname: redis
        ports:
            - "6379:6379"
        networks:
            gateway:
                aliases:
                    - redis

    tyk_gateway:
        image: tykio/tyk-gateway:latest
        ports:
            - "80:8080"
            - "8080:8080"
        volumes:
            - ./tyk.conf:/opt/tyk-gateway/tyk.conf
        networks:
            - gateway

    keycloak:
        image: jboss/keycloak
        ports:
            - 38080:8080
        networks:
            - gateway
        environment:
            - KEYCLOAK_USER=admin
            - KEYCLOAK_PASSWORD=admin123

    graphite:
        image: hopsoft/graphite-statsd
        hostname: graphite
        ports:
            - 8081:80
            - 2003:2003
            - 2004:2004
            - 2023:2023
            - 2024:2024
            - 8125:8125/udp
            - 8126:8126
        networks:
            - gateway


networks:
    gateway:
